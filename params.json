{"name":"Dockerana","tagline":"","body":"[dockerana](http://schvin.github.io/dockerana/)\r\n=========\r\n\r\nPitch:\r\n\r\n* time-series (note kibana, graphite, etc)\r\n\r\n<img src=\"http://thecabin.net/sites/default/files/bigfoot.jpg\">\r\n\r\n#### Initial setup :\r\n\r\n* disclaimer about logs & disk space (upstart will rotate/etc; but growth of backend, etc.)\r\n* assumes ipv4 only at this point\r\n\r\nUbuntu 14.04 (assumes vanilla install w/ rsyslog, etc.):\r\n\r\nOfficial install from http://docs.docker.io/installation/ubuntulinux/#ubuntu-trusty-1404-lts-64-bit\r\n\r\n```\r\nsudo apt-get update\r\nsudo apt-get install docker.io\r\nsudo ln -sf /usr/bin/docker.io /usr/local/bin/docker\r\nsudo sed -i '$acomplete -F _docker docker' /etc/bash_completion.d/docker.io\r\n```\r\n\r\nUpdate to a current docker:\r\n\r\n```\r\ncd /tmp\r\nwget https://get.docker.io/builds/Linux/x86_64/docker-latest -O docker\r\nsudo mv docker /usr/bin/docker.io\r\nsudo chown root:root /usr/bin/docker.io\r\nsudo chmod 755 /usr/bin/docker.io\r\n```\r\n\r\nMake these changes :\r\n\r\n(FIXME deal with situation where pre-existing docker_opts exist/ordering/etc)\r\n\r\n```\r\nprintf \"\\n# Added for dockerana log aggregation\\nDOCKER_OPTS=\\\" -D\\\"\\n\" | sudo tee -a /etc/default/docker.io > /dev/null\r\nsudo perl -pi -e 's/(\\\"\\$DOCKER\\\" -d \\$DOCKER_OPTS)/$1 2>&1 | logger -t docker/' docker.io.conf\r\n\r\n```\r\n\r\nGo ahead and start docker:\r\n\r\n```\r\nsudo service docker.io start\r\n```\r\n\r\nTo build:\r\n\r\n```\r\n./build\r\n```\r\n\r\nTo start:\r\n\r\n```\r\n./start\r\n```\r\n\r\nTo stop:\r\n\r\n```\r\n./stop\r\n```\r\n\r\nFIXME\r\n\r\nstart up dockerana\r\n\r\n sudo docker run --privileged=true -v /var/log:/tmp/log:ro -v /proc:/tmp/proc:ro --link hungry_heisenberg:grafana  -i -t dockerana /bin/bash\r\n","google":"UA-51734691-1","note":"Don't delete this file! It's used internally to help with page regeneration."}